{"version":3,"sources":["webpack:///./src/checkin/performCheckin.js","webpack:///./src/checkin/CheckinDialog.js","webpack:///./src/checkin/index.js"],"names":["performCheckIn","_x","_x2","_x3","arguments","_callee","refCode","totp","eventId","response","regenerator_default","a","wrap","_context","prev","next","axios_default","post","toUpperCase","sent","abrupt","data","stop","this","apply","CheckinDialog_CheckinDialog","_React$Component","CheckinDialog","_this","_len","length","args","Array","_key","call","concat","state","error","errorText","success","attendee","loading","onSubmit","e","preventDefault","checkIn","asyncToGenerator_default","mark","result","setState","form","value","Error","t0","catch","finish","inheritsLoose_default","_proto","prototype","render","react_default","createElement","esm","actions","text","onClick","props","onClose","heading","onCloseComplete","shouldCloseOnOverlayClick","renderContent","_this2","info","name","position","company","onKeyDown","keyCode","ref","field_text_dist_esm","isInvalid","label","placeholder","Preloader","style","marginTop","banner_dist_esm","isOpen","appearance","Component","_ref2","className","Object","index_es","css","display","verticalAlign","dist_esm","renderDialog","_ref"],"mappings":"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","file":"checkin-60968184a6961257b1fb.js","sourcesContent":["import axios from 'axios'\n\nexport async function performCheckIn (refCode, totp, eventId) {\n  const response = await axios.post(\n    'https://us-central1-reactbkk3-tickets-checkin.cloudfunctions.net/checkIn',\n    {\n      refCode: `${refCode}`.toUpperCase(),\n      totp,\n      eventId,\n    }\n  )\n  return response.data\n}\n","import React from 'react'\nimport ModalDialog from '@atlaskit/modal-dialog'\nimport Spinner from '@atlaskit/spinner'\nimport Banner from '@atlaskit/banner'\nimport TextField from '@atlaskit/field-text'\nimport { performCheckIn } from './performCheckin'\n\nexport class CheckinDialog extends React.Component {\n  state = {\n    error: null,\n    errorText: '',\n    success: false,\n    attendee: null,\n    loading: false,\n  }\n\n  render () {\n    return (\n      <ModalDialog\n        actions={[\n          ...(this.state.success ? [] : [{ text: 'Check in', onClick: this.checkIn }]),\n          { text: 'Close', onClick: this.props.onClose },\n        ]}\n        heading=\"Self check-in\"\n        onCloseComplete={this.props.onClose}\n        shouldCloseOnOverlayClick={false}\n      >\n        {this.renderContent()}\n      </ModalDialog>\n    )\n  }\n\n  renderContent () {\n    if (this.state.success) {\n      const info = this.state.attendee.info || {}\n      return (\n        <div>\n          <div>Welcome to React Bangkok 3.0.0!</div>\n          <br />\n          <div>\n            <strong>{info.name}</strong>\n          </div>\n          <div>{info.position}</div>\n          <div>{info.company}</div>\n          <br />\n          <div>\n            Thank you for checking in. Please proceed to receive your T-shirt and name tag. We hope\n            you enjoy the event!\n          </div>\n        </div>\n      )\n    }\n    return (\n      <form\n        onSubmit={this.onSubmit}\n        onKeyDown={e => {\n          if (e.keyCode === 13) {\n            e.preventDefault()\n            this.checkIn()\n          }\n        }}\n        ref={form => {\n          this.form = form\n        }}\n      >\n        <TextField\n          isInvalid={this.state.error === 'refCode'}\n          name=\"refCode\"\n          label=\"Ticket reference code\"\n          placeholder=\"ABCDEF\"\n        />\n        <TextField\n          isInvalid={this.state.error === 'totp'}\n          name=\"totp\"\n          label=\"TOTP code (shown at kiosk)\"\n          placeholder=\"123456\"\n        />\n        {!!this.state.loading && <Preloader text=\"Checking in...\" />}\n        <div style={{ marginTop: 20 }}>\n          <Banner isOpen={!!this.state.error} appearance=\"error\">\n            Cannot check in: {this.state.errorText}\n          </Banner>\n        </div>\n      </form>\n    )\n  }\n\n  onSubmit = e => {\n    e.preventDefault()\n    this.checkIn()\n  }\n\n  checkIn = async () => {\n    if (this.state.loading || this.state.success) return\n    this.setState({ loading: true, error: null })\n    try {\n      if (!this.form) return\n      const refCode = this.form.refCode.value\n      const totp = this.form.totp.value\n      if (!refCode) {\n        this.setState({ error: 'refCode', errorText: 'Ticket reference code is required.' })\n        return\n      }\n      if (!totp) {\n        this.setState({ error: 'totp', errorText: 'TOTP is required.' })\n        return\n      }\n      const result = await performCheckIn(refCode, totp, 'reactbkk3')\n      if (result.error === 'EREF') {\n        this.setState({\n          error: 'refCode',\n          errorText:\n            'Ticket reference code is not recognized. Please double-check your reference code.',\n        })\n        return\n      }\n      if (result.error === 'ETOKEN') {\n        this.setState({\n          error: 'totp',\n          errorText: 'TOTP code is incorrect. You can find the TOTP code at the checkin kiosk.',\n        })\n        return\n      }\n      if (!result.attendee) {\n        throw new Error('Expected field \"attendee\" to be present in result')\n      }\n      this.setState({\n        success: true,\n        attendee: result.attendee,\n      })\n    } catch (e) {\n      this.setState({ error: 'unknown', errorText: `UNEXPECTED ERROR â€” ${e}` })\n    } finally {\n      this.setState({ loading: false })\n    }\n  }\n}\n\nfunction Preloader ({ text }) {\n  return (\n    <div css={{ marginTop: '20px' }}>\n      <span css={{ display: 'inline-block', verticalAlign: 'middle' }}>\n        <Spinner />\n      </span>{' '}\n      {text}\n    </div>\n  )\n}\n","import React from 'react'\nimport { CheckinDialog } from './CheckinDialog'\n\nexport function renderDialog ({ onClose }) {\n  return <CheckinDialog onClose={onClose} />\n}\n"],"sourceRoot":""}