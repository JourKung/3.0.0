{"version":3,"sources":["webpack:///./src/checkin/performCheckin.js","webpack:///./src/checkin/CheckinDialog.js","webpack:///./src/checkin/index.js"],"names":["performCheckIn","_x","_x2","_x3","arguments","_callee","refCode","totp","eventId","response","regenerator_default","a","wrap","_context","prev","next","axios_default","post","toUpperCase","sent","abrupt","data","stop","this","apply","CheckinDialog_CheckinDialog","_React$Component","CheckinDialog","_temp","_this","_len","length","args","Array","_key","call","concat","state","error","errorText","success","attendee","loading","onSubmit","e","preventDefault","checkIn","asyncToGenerator_default","mark","result","setState","form","value","Error","t0","catch","finish","assertThisInitialized_default","_proto","prototype","render","react_default","createElement","esm","actions","text","onClick","props","onClose","heading","onCloseComplete","shouldCloseOnOverlayClick","renderContent","_this2","info","name","position","company","onKeyDown","keyCode","ref","field_text_dist_esm","isInvalid","label","placeholder","Preloader","style","marginTop","banner_dist_esm","isOpen","appearance","inheritsLoose_default","Component","_ref2","className","Object","index_es","css","display","verticalAlign","dist_esm","renderDialog","_ref"],"mappings":"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","file":"checkin-ce989b6f8174b416d8d3.js","sourcesContent":["import axios from 'axios'\n\nexport async function performCheckIn (refCode, totp, eventId) {\n  const response = await axios.post(\n    'https://us-central1-reactbkk3-tickets-checkin.cloudfunctions.net/checkIn',\n    {\n      refCode: `${refCode}`.toUpperCase(),\n      totp,\n      eventId,\n    }\n  )\n  return response.data\n}\n","import React from 'react'\nimport ModalDialog from '@atlaskit/modal-dialog'\nimport Spinner from '@atlaskit/spinner'\nimport Banner from '@atlaskit/banner'\nimport TextField from '@atlaskit/field-text'\nimport { performCheckIn } from './performCheckin'\n\nexport class CheckinDialog extends React.Component {\n  state = {\n    error: null,\n    errorText: '',\n    success: false,\n    attendee: null,\n    loading: false,\n  }\n\n  render () {\n    return (\n      <ModalDialog\n        actions={[\n          ...(this.state.success ? [] : [{ text: 'Check in', onClick: this.checkIn }]),\n          { text: 'Close', onClick: this.props.onClose },\n        ]}\n        heading=\"Self check-in\"\n        onCloseComplete={this.props.onClose}\n        shouldCloseOnOverlayClick={false}\n      >\n        {this.renderContent()}\n      </ModalDialog>\n    )\n  }\n\n  renderContent () {\n    if (this.state.success) {\n      const info = this.state.attendee.info || {}\n      return (\n        <div>\n          <div>Welcome to React Bangkok 3.0.0!</div>\n          <br />\n          <div>\n            <strong>{info.name}</strong>\n          </div>\n          <div>{info.position}</div>\n          <div>{info.company}</div>\n          <br />\n          <div>\n            Thank you for checking in. Please proceed to receive your T-shirt and name tag. We hope\n            you enjoy the event!\n          </div>\n        </div>\n      )\n    }\n    return (\n      <form\n        onSubmit={this.onSubmit}\n        onKeyDown={e => {\n          if (e.keyCode === 13) {\n            e.preventDefault()\n            this.checkIn()\n          }\n        }}\n        ref={form => {\n          this.form = form\n        }}\n      >\n        <TextField\n          isInvalid={this.state.error === 'refCode'}\n          name=\"refCode\"\n          label=\"Ticket reference code\"\n          placeholder=\"ABCDEF\"\n        />\n        <TextField\n          isInvalid={this.state.error === 'totp'}\n          name=\"totp\"\n          label=\"TOTP code (shown at kiosk)\"\n          placeholder=\"123456\"\n        />\n        {!!this.state.loading && <Preloader text=\"Checking in...\" />}\n        <div style={{ marginTop: 20 }}>\n          <Banner isOpen={!!this.state.error} appearance=\"error\">\n            Cannot check in: {this.state.errorText}\n          </Banner>\n        </div>\n      </form>\n    )\n  }\n\n  onSubmit = e => {\n    e.preventDefault()\n    this.checkIn()\n  }\n\n  checkIn = async () => {\n    if (this.state.loading || this.state.success) return\n    this.setState({ loading: true, error: null })\n    try {\n      if (!this.form) return\n      const refCode = this.form.refCode.value\n      const totp = this.form.totp.value\n      if (!refCode) {\n        this.setState({ error: 'refCode', errorText: 'Ticket reference code is required.' })\n        return\n      }\n      if (!totp) {\n        this.setState({ error: 'totp', errorText: 'TOTP is required.' })\n        return\n      }\n      const result = await performCheckIn(refCode, totp, 'reactbkk3')\n      if (result.error === 'EREF') {\n        this.setState({\n          error: 'refCode',\n          errorText:\n            'Ticket reference code is not recognized. Please double-check your reference code.',\n        })\n        return\n      }\n      if (result.error === 'ETOKEN') {\n        this.setState({\n          error: 'refCode',\n          errorText: 'TOTP code is incorrect. You can find the TOTP code at the checkin kiosk.',\n        })\n        return\n      }\n      if (!result.attendee) {\n        throw new Error('Expected field \"attendee\" to be present in result')\n      }\n      this.setState({\n        success: true,\n        attendee: result.attendee,\n      })\n    } catch (e) {\n      this.setState({ error: 'unknown', errorText: `UNEXPECTED ERROR â€” ${e}` })\n    } finally {\n      this.setState({ loading: false })\n    }\n  }\n}\n\nfunction Preloader ({ text }) {\n  return (\n    <div css={{ marginTop: '20px' }}>\n      <span css={{ display: 'inline-block', verticalAlign: 'middle' }}>\n        <Spinner />\n      </span>{' '}\n      {text}\n    </div>\n  )\n}\n","import React from 'react'\nimport { CheckinDialog } from './CheckinDialog'\n\nexport function renderDialog ({ onClose }) {\n  return <CheckinDialog onClose={onClose} />\n}\n"],"sourceRoot":""}