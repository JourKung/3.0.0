(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{433:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),o=r(239),c=(r(290),r(251)),s=r.n(c),i=(r(245),r(250)),l=r.n(i),u=r(82),d=r.n(u),p=r(248),f=r.n(p),h=r(297),k=r(252),m=r(294),v=r(296),b=r(316),E=r.n(b);function C(e,t,r){return function(){return l()(s.a.mark(function e(t,r,n){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("https://us-central1-reactbkk3-tickets-checkin.cloudfunctions.net/checkIn",{refCode:(""+t).toUpperCase(),totp:r,eventId:n});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)})).apply(this,arguments)}.apply(this,arguments)}var x=function(e){function t(){for(var t,r,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=r=e.call.apply(e,[this].concat(a))||this,r.state={error:null,errorText:"",success:!1,attendee:null,loading:!1},r.onSubmit=function(e){e.preventDefault(),r.checkIn()},r.checkIn=l()(s.a.mark(function e(){var t,n,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.state.loading&&!r.state.success){e.next=2;break}return e.abrupt("return");case 2:if(r.setState({loading:!0,error:null}),e.prev=3,r.form){e.next=6;break}return e.abrupt("return");case 6:if(t=r.form.refCode.value,n=r.form.totp.value,t){e.next=11;break}return r.setState({error:"refCode",errorText:"Ticket reference code is required."}),e.abrupt("return");case 11:if(n){e.next=14;break}return r.setState({error:"totp",errorText:"TOTP is required."}),e.abrupt("return");case 14:return e.next=16,C(t,n,"reactbkk3");case 16:if("EREF"!==(a=e.sent).error){e.next=20;break}return r.setState({error:"refCode",errorText:"Ticket reference code is not recognized. Please double-check your reference code."}),e.abrupt("return");case 20:if("ETOKEN"!==a.error){e.next=23;break}return r.setState({error:"refCode",errorText:"TOTP code is incorrect. You can find the TOTP code at the checkin kiosk."}),e.abrupt("return");case 23:if(a.attendee){e.next=25;break}throw new Error('Expected field "attendee" to be present in result');case 25:r.setState({success:!0,attendee:a.attendee}),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(3),r.setState({error:"unknown",errorText:"UNEXPECTED ERROR â€” "+e.t0});case 31:return e.prev=31,r.setState({loading:!1}),e.finish(31);case 34:case"end":return e.stop()}},e,this,[[3,28,31,34]])})),t||f()(r)}var r=t.prototype;return r.render=function(){return a.a.createElement(h.a,{actions:(this.state.success?[]:[{text:"Check in",onClick:this.checkIn}]).concat([{text:"Close",onClick:this.props.onClose}]),heading:"Self check-in",onCloseComplete:this.props.onClose,shouldCloseOnOverlayClick:!1},this.renderContent())},r.renderContent=function(){var e=this;if(this.state.success){var t=this.state.attendee.info||{};return a.a.createElement("div",null,a.a.createElement("div",null,"Welcome to React Bangkok 3.0.0!"),a.a.createElement("br",null),a.a.createElement("div",null,a.a.createElement("strong",null,t.name)),a.a.createElement("div",null,t.position),a.a.createElement("div",null,t.company),a.a.createElement("br",null),a.a.createElement("div",null,"Thank you for checking in. Please proceed to receive your T-shirt and name tag. We hope you enjoy the event!"))}return a.a.createElement("form",{onSubmit:this.onSubmit,onKeyDown:function(t){13===t.keyCode&&(t.preventDefault(),e.checkIn())},ref:function(t){e.form=t}},a.a.createElement(v.a,{isInvalid:"refCode"===this.state.error,name:"refCode",label:"Ticket reference code",placeholder:"ABCDEF"}),a.a.createElement(v.a,{isInvalid:"totp"===this.state.error,name:"totp",label:"TOTP code (shown at kiosk)",placeholder:"123456"}),!!this.state.loading&&a.a.createElement(T,{text:"Checking in..."}),a.a.createElement("div",{style:{marginTop:20}},a.a.createElement(m.a,{isOpen:!!this.state.error,appearance:"error"},"Cannot check in: ",this.state.errorText)))},d()(t,e),t}(a.a.Component);function T(e){var t=e.text;return a.a.createElement("div",{className:Object(o.css)({marginTop:"20px"})},a.a.createElement("span",{className:Object(o.css)({display:"inline-block",verticalAlign:"middle"})},a.a.createElement(k.a,null))," ",t)}function g(e){var t=e.onClose;return a.a.createElement(x,{onClose:t})}r.d(t,"renderDialog",function(){return g})}}]);
//# sourceMappingURL=checkin-ce989b6f8174b416d8d3.js.map